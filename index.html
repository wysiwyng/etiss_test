<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ETISS 0.8.0: Extendable Translating Instruction Set Simulator (ETISS)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ETISS 0.8.0
   </div>
   <div id="projectbrief">ExtendableTranslatingInstructionSetSimulator(version0.8.0)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Extendable Translating Instruction Set Simulator (ETISS) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Introduction">Introduction</a></li>
<li class="level1"><a href="#install">Installation</a><ul><li class="level2"><a href="#install1">Required Files and Folder Structure</a></li>
<li class="level2"><a href="#install2">Compile ETISS with ArchImpl and JITImpl sub projects</a></li>
</ul>
</li>
<li class="level1"><a href="#create1">Create a project</a></li>
<li class="level1"><a href="#create2">Create a library for etiss</a></li>
<li class="level1"><a href="#hstructure">Highlevel structure of ETISS</a></li>
<li class="level1"><a href="#MMU">MMU</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="etiss_main"></a></p>
<h1><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>ETISS is an instruction set simulator, that translates instructions into C code. The C-code of an instruction block is compiled and executed at runtime. Instruction translation is done by an <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a> implementation. <a class="el" href="classetiss_1_1TranslationPlugin.html" title="allows to add code to the translation of instructions">etiss::TranslationPlugin</a> allows to add additional code to a translated instruction (e.g. <a class="el" href="classetiss_1_1plugin_1_1gdb_1_1Server.html" title="gdb server implementation that is used as a plugin in etiss">etiss::plugin::gdb::Server</a> adds code for debugging). The CPUArch provides a cpu structure and access functions. <a class="el" href="classetiss_1_1JIT.html" title="compiler interface for just in time compilation of generated C code">etiss::JIT</a> instances handle compilation and loading of the translated instruction. <a class="el" href="classetiss_1_1CPUCore.html" title="CPUCore is responsible for the simulation of a CPU core in ETISS.">etiss::CPUCore</a> manages these objects and executes a processor model.</p>
<h1><a class="anchor" id="install"></a>
Installation</h1>
<p>This section assumes that ETISS is not precompiled. The described methods assume a common linux system and have been tested on Ubuntu 18.04 with gcc 7.4. Used paths are usually relative.</p>
<h2><a class="anchor" id="install1"></a>
Required Files and Folder Structure</h2>
<p>The toplevel folder of ETISS (e.g. ./ETISS/trunk) (in the following refered to as "path/to/ETISS" ) should contain the following file/folders:</p>
<pre>
    <a class="el" href="folder_include_etiss.html">include/etiss/</a>    C++ header files of ETISS
    <a class="el" href="folder_include_c_etiss.html">include_c/etiss/</a>    C compatible header files for ETISS and translation
    src/    C++ source files of ETISS
    ArchImpl/    <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a> implementations (included: OR1K, RISCV, RISCV64 )
    JITImpl/    <a class="el" href="classetiss_1_1JIT.html" title="compiler interface for just in time compilation of generated C code">etiss::JIT</a> implementations should be located here (included: GCC, LLVM, TCC )
    PluginImpl/    <a class="el" href="classetiss_1_1Plugin.html" title="base plugin class that provides access to different plugin functions if present">etiss::Plugin</a> implementations should be located here</pre><pre>    CMakeLists.txt    main CMakeLists file. It builds ETISS and any project located in the ArchImpl,JITImpl,PluginImpl,projects sub folders if they also have a CMakeLists.txt.
</pre><h2><a class="anchor" id="install2"></a>
Compile ETISS with ArchImpl and JITImpl sub projects</h2>
<p>ETISS itself has only standard depencencies like &lt;<a class="el" href="stdint_8h.html">stdint.h</a>&gt; or &lt;dlsym.h&gt; and dosn't require external tools beyond those of a default C++ environment.</p>
<p>Therefore ETISS is supposed to compile out of the box. Just make sure that the Boost filesystem library is installed (libboost-filesystem-dev on Ubuntu).</p>
<p>The provided CPUArch implementations and the default JIT implementation that uses TCC should also need no adaption. The GCC JIT requires GCC to be installed and the LLVM JIT requires the LLVM and Clang development libraries and headers. Set the environment variable LLVM_DIR to the LLVM installation path to use it.</p>
<p>The provided example software located in SW/ requires a gnu tool chain for the respective architectures. Set the appropriate CMake option variables to specify the toolchain path.</p>
<p>To build ETISS create a new directory (e.g. install) and open a terminal in that folder. To install ETISS into standard folders, run the following commands in opened terminal:</p>
<pre>
    $ mkdir build &amp;&amp; cd build
    $ cmake ..
    $ make
    $ make install
</pre><p>Above command will detect the default build system on the current host and generate neccessary files (e.g. Makefiles for Unix systems). For further option please have a look at the CMakeLists.txt in the ETISS root folder. The comment section at the beginning of the file contains a table with variables and options. Because no install folder was given, the default install folder for programs is used. This will likely require administrator rights for $ make install. A possible and recommended cmake command with additional options is:</p>
<pre>
    $ mkdir build &amp;&amp; cd build
    $ cmake -DCMAKE_BUILD_TYPE=Debug -DETISS_BUILD_MANUAL_DOC=ON -DCMAKE_INSTALL_PREFIX:PATH=`pwd`/installed ..
    $ make
    $ make doc
    $ make install
</pre><p>That command will configure ETISS to build in debug mode. It will prevent the documentation to be created upon running the "all" target of the generated makefile (requires building of the target doc to get and install the documentation). The make command will then build ETISS and plugins. $ make install installs etiss into the target folder.</p>
<h1><a class="anchor" id="create1"></a>
Create a project</h1>
<p>This documentation is targeted at projects that use ETISS, not projects that primarily aiming to extend ETISS. Refer to <a class="el" href="howto_etiss.html">How to use ETISS</a> for a guide to the frontend api and use of ETISS. <a class="el" href="index.html#hstructure">Highlevel structure of ETISS</a> shows the general structure of ETISS including the frontend api.</p>
<h1><a class="anchor" id="create2"></a>
Create a library for etiss</h1>
<p>ETISS can be extended with plugins. The tree classes <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a>, <a class="el" href="classetiss_1_1JIT.html" title="compiler interface for just in time compilation of generated C code">etiss::JIT</a> and <a class="el" href="classetiss_1_1Plugin.html" title="base plugin class that provides access to different plugin functions if present">etiss::Plugin</a> are the main classes for extension. <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a> implements instruction translation, <a class="el" href="classetiss_1_1JIT.html" title="compiler interface for just in time compilation of generated C code">etiss::JIT</a> handles compiling/linking of genereated C-code and <a class="el" href="classetiss_1_1Plugin.html" title="base plugin class that provides access to different plugin functions if present">etiss::Plugin</a> is the base plugin class that is inherited by the 5 plug-in types <a class="el" href="classetiss_1_1InterruptListenerPlugin.html">etiss::InterruptListenerPlugin</a>, <a class="el" href="classetiss_1_1TranslationPlugin.html" title="allows to add code to the translation of instructions">etiss::TranslationPlugin</a>, <a class="el" href="classetiss_1_1CoroutinePlugin.html" title="this plugin will be called before a block is executed.">etiss::CoroutinePlugin</a>,<a class="el" href="classetiss_1_1SystemWrapperPlugin.html" title="this plugin allows to wrap the ETISS_System interface">etiss::SystemWrapperPlugin</a> and <a class="el" href="classetiss_1_1RegisterDevicePlugin.html" title="RegisterDevicePlugin::changedRegister is called if a supported register has been changed.">etiss::RegisterDevicePlugin</a>. <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a> inherites the <a class="el" href="classetiss_1_1TranslationPlugin.html" title="allows to add code to the translation of instructions">etiss::TranslationPlugin</a>. Implementing that interface is sufficient in case of <a class="el" href="classetiss_1_1JIT.html" title="compiler interface for just in time compilation of generated C code">etiss::JIT</a> and <a class="el" href="classetiss_1_1Plugin.html" title="base plugin class that provides access to different plugin functions if present">etiss::Plugin</a> (+ child classes) to use them by adding them to a CPUCore with <a class="el" href="classetiss_1_1CPUCore.html#a9d8a67fbed9ba6fa5dd9d82835581ff3" title="Set the JIT plug-in used for execution.">etiss::CPUCore::set()</a> and <a class="el" href="classetiss_1_1CPUCore.html#a97bd4fd5ed1a74d4c24c0d18cc0077ed" title="Adds a plug-in to the core simulator.">etiss::CPUCore::addPlugin()</a>.</p>
<p>For detailed implementation guides for <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a>,<a class="el" href="classetiss_1_1JIT.html" title="compiler interface for just in time compilation of generated C code">etiss::JIT</a> and <a class="el" href="classetiss_1_1Plugin.html" title="base plugin class that provides access to different plugin functions if present">etiss::Plugin</a> refer to the respective guides:</p>
<ul>
<li><a class="el" href="howto_cpuarch.html">How to implement a cpu architecture for ETISS</a> </li>
<li><a class="el" href="howto_jit.html">How to implement a just in time compiler for ETISS</a> </li>
<li><a class="el" href="howto_plugin.html">How to implement a plugin for ETISS</a></li>
</ul>
<p>To create a library for ETISS that provides <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a>, <a class="el" href="classetiss_1_1JIT.html" title="compiler interface for just in time compilation of generated C code">etiss::JIT</a> or <a class="el" href="classetiss_1_1Plugin.html" title="base plugin class that provides access to different plugin functions if present">etiss::Plugin</a> implementations also refer to <a class="el" href="folder_include_etiss_helper.html">include/etiss/helper/</a></p>
<p>The following two images show how plugins interact with the <a class="el" href="classetiss_1_1CPUCore.html#a3abad91e823939228f7db1596e040c19" title="Start the simulation of the CPU core for the system model.">etiss::CPUCore::execute()</a> function that is the primary simulation loop of any processor.</p>
<p>Flow chart for the execution of the primary simulation loop in <a class="el" href="classetiss_1_1CPUCore.html#a3abad91e823939228f7db1596e040c19" title="Start the simulation of the CPU core for the system model.">etiss::CPUCore::execute()</a> together with plugins.</p>
<div class="image">
<img src="doc_cpucore.png" alt=""/>
</div>
<p>Flow chart of the translation phase. An <a class="el" href="classetiss_1_1CPUArch.html" title="the interface to translate instructions of and processor architecture">etiss::CPUArch</a> implementation is responsible for handeling of endiannes and determining of instruction length.</p>
<div class="image">
<img src="instruction_read.png" alt=""/>
</div>
<h1><a class="anchor" id="hstructure"></a>
Highlevel structure of ETISS</h1>
<div class="image">
<img src="Structure Overview.png" alt=""/>
</div>
<h1><a class="anchor" id="MMU"></a>
MMU</h1>
<p>ETISS version 0.1 doesn't provide a MMU with its example <a class="el" href="structOR1K.html">OR1K</a> implementation. For further information please refer to the <a class="el" href="mmu_concepts.html">MMU Concepts</a> page. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 19 2022 12:53:25 for ETISS 0.8.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
